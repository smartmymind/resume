<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
    </head>
    <body>
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>


    <script>
    window.onload = function(){
        var fadeobj = document.getElementById('fade-obj');
        var btn = document.getElementById('fade-btn');
        var speed = 1;
        var timer = null;
        var alpha = 100;
        btn.onclick = function(){
            console.log(btn.innerHTML)
            btn.disabled = true;
            if(btn.innerHTML=='淡出'){

                startrun(0);
            }else if(btn.innerHTML=='淡入'){
                startrun(100);
            }
            // startrun(0);
            console.log(btn.innerHTML)
            // btn.disabled = false;
        }
        // btn.onmouseout = function(){
        //     startrun(100);
        // }
        function startrun(target){
            clearInterval(timer);
            timer = setInterval(function(){
              if(target > alpha){
                speed = 2;
              }else{
                speed = -2;
              }

              if(alpha == target){
                clearInterval(timer);
                btn.disabled = false;
                if(btn.innerHTML=='淡出'){

                    btn.innerHTML = '淡入';
                }else if(btn.innerHTML=='淡入'){
                    btn.innerHTML = '淡出';
                }
                // btn.disabled = false;
                // btn.innerHTML = '淡入';
              }
              else{
                alpha = alpha + speed;
                fadeobj.style.filter = 'alpha(opacity='+alpha+')';
                fadeobj.style.opacity = alpha/100;
                document.title = alpha;
              }

              // if(target==0){
              //   // btn.disabled = false;
              //   btn.innerHTML = '淡入';
              // }else{
              //   btn.innerHTML = '淡出';
              // }
            },30)
        }
    }
    </script>
    </body>
</html>